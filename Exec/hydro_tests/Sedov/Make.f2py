
LIBSRC_OBJECTS = tmp_build_dir/o/3d.gnu.EXE/Castro.o tmp_build_dir/o/3d.gnu.EXE/Castro_advance.o tmp_build_dir/o/3d.gnu.EXE/Castro_setup.o tmp_build_dir/o/3d.gnu.EXE/Castro_error.o tmp_build_dir/o/3d.gnu.EXE/Castro_io.o tmp_build_dir/o/3d.gnu.EXE/CastroBld.o tmp_build_dir/o/3d.gnu.EXE/main.o tmp_build_dir/o/3d.gnu.EXE/sum_utils.o tmp_build_dir/o/3d.gnu.EXE/sum_integrated_quantities.o tmp_build_dir/o/3d.gnu.EXE/Castro_hydro.o tmp_build_dir/o/3d.gnu.EXE/Prob.o tmp_build_dir/o/3d.gnu.EXE/Castro_sources.o tmp_build_dir/o/3d.gnu.EXE/Castro_external.o tmp_build_dir/o/3d.gnu.EXE/AMReX.o tmp_build_dir/o/3d.gnu.EXE/AMReX_error_fi.o tmp_build_dir/o/3d.gnu.EXE/AMReX_ParmParse.o tmp_build_dir/o/3d.gnu.EXE/AMReX_parmparse_fi.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Utility.o tmp_build_dir/o/3d.gnu.EXE/AMReX_DistributionMapping.o tmp_build_dir/o/3d.gnu.EXE/AMReX_ParallelDescriptor.o tmp_build_dir/o/3d.gnu.EXE/AMReX_VisMF.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Arena.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BArena.o tmp_build_dir/o/3d.gnu.EXE/AMReX_CArena.o tmp_build_dir/o/3d.gnu.EXE/AMReX_NFiles.o tmp_build_dir/o/3d.gnu.EXE/AMReX_SPMD.o tmp_build_dir/o/3d.gnu.EXE/AMReX_parstream.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FabConv.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FPC.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Box.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BoxIterator.o tmp_build_dir/o/3d.gnu.EXE/AMReX_IntVect.o tmp_build_dir/o/3d.gnu.EXE/AMReX_IndexType.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Orientation.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Periodicity.o tmp_build_dir/o/3d.gnu.EXE/AMReX_RealBox.o tmp_build_dir/o/3d.gnu.EXE/AMReX_RealVect.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BoxList.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BoxArray.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BoxDomain.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FArrayBox.o tmp_build_dir/o/3d.gnu.EXE/AMReX_IArrayBox.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BaseFab.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MultiFab.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MFCopyDescriptor.o tmp_build_dir/o/3d.gnu.EXE/AMReX_iMultiFab.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FabArrayBase.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MFIter.o tmp_build_dir/o/3d.gnu.EXE/AMReX_CoordSys.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Geometry.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MultiFabUtil.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BCRec.o tmp_build_dir/o/3d.gnu.EXE/AMReX_PhysBCFunct.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BCUtil.o tmp_build_dir/o/3d.gnu.EXE/AMReX_PlotFileUtil.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BLProfiler.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BLBackTrace.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MemPool.o tmp_build_dir/o/3d.gnu.EXE/AMReX_AmrCore.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Cluster.o tmp_build_dir/o/3d.gnu.EXE/AMReX_ErrorList.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FillPatchUtil.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FluxRegister.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Interpolater.o tmp_build_dir/o/3d.gnu.EXE/AMReX_TagBox.o tmp_build_dir/o/3d.gnu.EXE/AMReX_AmrMesh.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Amr.o tmp_build_dir/o/3d.gnu.EXE/AMReX_AmrLevel.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Derive.o tmp_build_dir/o/3d.gnu.EXE/AMReX_StateData.o tmp_build_dir/o/3d.gnu.EXE/AMReX_StateDescriptor.o tmp_build_dir/o/3d.gnu.EXE/AMReX_AuxBoundaryData.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Extrapolater.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FabSet.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BndryRegister.o tmp_build_dir/o/3d.gnu.EXE/AMReX_Mask.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MultiMask.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BndryData.o tmp_build_dir/o/3d.gnu.EXE/AMReX_InterpBndryData.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MacBndry.o tmp_build_dir/o/3d.gnu.EXE/MultiFab_C_F.o tmp_build_dir/o/3d.gnu.EXE/backtrace_c.o tmp_build_dir/o/3d.gnu.EXE/fabio_c.o tmp_build_dir/o/3d.gnu.EXE/timer_c.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BLutil_F.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BLParmParse_F.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BLBoxLib_F.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BLProfiler_F.o tmp_build_dir/o/3d.gnu.EXE/AMReX_COORDSYS_3D.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FILCC_3D.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FLUXREG_3D.o tmp_build_dir/o/3d.gnu.EXE/AMReX_INTERP_3D.o tmp_build_dir/o/3d.gnu.EXE/AMReX_ARRAYLIM_3D.o tmp_build_dir/o/3d.gnu.EXE/AMReX_INTERPBNDRYDATA_3D.o tmp_build_dir/o/3d.gnu.EXE/AMReX_LO_UTIL.o tmp_build_dir/o/3d.gnu.EXE/constants_cgs.o tmp_build_dir/o/3d.gnu.EXE/model_parser.o tmp_build_dir/o/3d.gnu.EXE/AMReX_BaseFab_nd.o tmp_build_dir/o/3d.gnu.EXE/AMReX_MultiFabUtil_3d.o tmp_build_dir/o/3d.gnu.EXE/AMReX_mempool_f.o tmp_build_dir/o/3d.gnu.EXE/AMReX_extrapolater_3d.o tmp_build_dir/o/3d.gnu.EXE/network.o tmp_build_dir/o/3d.gnu.EXE/actual_network.o tmp_build_dir/o/3d.gnu.EXE/probdata.o tmp_build_dir/o/3d.gnu.EXE/amrinfo.o tmp_build_dir/o/3d.gnu.EXE/interpolate.o tmp_build_dir/o/3d.gnu.EXE/io.o tmp_build_dir/o/3d.gnu.EXE/math.o tmp_build_dir/o/3d.gnu.EXE/prob_params.o tmp_build_dir/o/3d.gnu.EXE/sums_nd.o tmp_build_dir/o/3d.gnu.EXE/Tagging_nd.o tmp_build_dir/o/3d.gnu.EXE/riemann_util.o tmp_build_dir/o/3d.gnu.EXE/metric.o tmp_build_dir/o/3d.gnu.EXE/problem_tagging_3d.o tmp_build_dir/o/3d.gnu.EXE/problem_derive_nd.o tmp_build_dir/o/3d.gnu.EXE/Problem.o tmp_build_dir/o/3d.gnu.EXE/ext_src_3d.o tmp_build_dir/o/3d.gnu.EXE/bc.o tmp_build_dir/o/3d.gnu.EXE/bc_functions.o tmp_build_dir/o/3d.gnu.EXE/bl_constants.o tmp_build_dir/o/3d.gnu.EXE/bl_error.o tmp_build_dir/o/3d.gnu.EXE/bl_IO.o tmp_build_dir/o/3d.gnu.EXE/bl_stream.o tmp_build_dir/o/3d.gnu.EXE/bl_string.o tmp_build_dir/o/3d.gnu.EXE/bl_timer.o tmp_build_dir/o/3d.gnu.EXE/amrex_timer_c.o tmp_build_dir/o/3d.gnu.EXE/bl_types.o tmp_build_dir/o/3d.gnu.EXE/bl_mem_stat.o tmp_build_dir/o/3d.gnu.EXE/bl_space.o tmp_build_dir/o/3d.gnu.EXE/bl_prof_stubs.o tmp_build_dir/o/3d.gnu.EXE/bndry_reg.o tmp_build_dir/o/3d.gnu.EXE/box_f.o tmp_build_dir/o/3d.gnu.EXE/boxarray_f.o tmp_build_dir/o/3d.gnu.EXE/define_bc_tower.o tmp_build_dir/o/3d.gnu.EXE/fab.o tmp_build_dir/o/3d.gnu.EXE/fabio.o tmp_build_dir/o/3d.gnu.EXE/amrex_fabio_c.o tmp_build_dir/o/3d.gnu.EXE/knapsack.o tmp_build_dir/o/3d.gnu.EXE/layout.o tmp_build_dir/o/3d.gnu.EXE/list_box.o tmp_build_dir/o/3d.gnu.EXE/ml_boxarray.o tmp_build_dir/o/3d.gnu.EXE/ml_layout.o tmp_build_dir/o/3d.gnu.EXE/ml_multifab.o tmp_build_dir/o/3d.gnu.EXE/cc_restriction.o tmp_build_dir/o/3d.gnu.EXE/nodal_restriction.o tmp_build_dir/o/3d.gnu.EXE/ml_cc_restriction.o tmp_build_dir/o/3d.gnu.EXE/ml_nd_restriction.o tmp_build_dir/o/3d.gnu.EXE/nodal_neumann_bcs.o tmp_build_dir/o/3d.gnu.EXE/nodal_stencil_bc.o tmp_build_dir/o/3d.gnu.EXE/multifab_f.o tmp_build_dir/o/3d.gnu.EXE/sort_box.o tmp_build_dir/o/3d.gnu.EXE/sort_d.o tmp_build_dir/o/3d.gnu.EXE/sort_i.o tmp_build_dir/o/3d.gnu.EXE/vector_i.o tmp_build_dir/o/3d.gnu.EXE/omp_stubs.o tmp_build_dir/o/3d.gnu.EXE/parallel_stubs.o tmp_build_dir/o/3d.gnu.EXE/multifab_c.o tmp_build_dir/o/3d.gnu.EXE/backtrace_f.o tmp_build_dir/o/3d.gnu.EXE/extern.o tmp_build_dir/o/3d.gnu.EXE/AMReX_filcc_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_omp_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_fort_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_error_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_parmparse_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_string_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_bc_types_mod.o tmp_build_dir/o/3d.gnu.EXE/AMReX_FillPatchUtil_3d.o tmp_build_dir/o/3d.gnu.EXE/microphysics_math.o tmp_build_dir/o/3d.gnu.EXE/castro_c_interfaces_nd.o tmp_build_dir/o/3d.gnu.EXE/Castro_nd.o tmp_build_dir/o/3d.gnu.EXE/Castro_util.o tmp_build_dir/o/3d.gnu.EXE/Derive_nd.o tmp_build_dir/o/3d.gnu.EXE/timestep.o tmp_build_dir/o/3d.gnu.EXE/advection_util_nd.o tmp_build_dir/o/3d.gnu.EXE/riemann_nd.o tmp_build_dir/o/3d.gnu.EXE/Castro_mol_3d.o tmp_build_dir/o/3d.gnu.EXE/riemann_3d.o tmp_build_dir/o/3d.gnu.EXE/reconstruct_nd.o tmp_build_dir/o/3d.gnu.EXE/bc_fill_3d.o tmp_build_dir/o/3d.gnu.EXE/AMReX_buildInfo.o tmp_build_dir/o/3d.gnu.EXE/meth_params.o tmp_build_dir/o/3d.gnu.EXE/eos.o tmp_build_dir/o/3d.gnu.EXE/eos_type.o tmp_build_dir/o/3d.gnu.EXE/eos_override.o tmp_build_dir/o/3d.gnu.EXE/gamma_law.o

INCLUDE_FOLDERS = /home/alice/Documents/amrex/Src/Base /home/alice/Documents/amrex/Src/AmrCore /home/alice/Documents/amrex/Src/Amr /home/alice/Documents/amrex/Src/Boundary /home/alice/Documents/Microphysics/util ../../../Source/driver ../../../Source/driver/param_includes ../../../Source/hydro ../../../Source/problems ../../../Source/sources ../../../constants ../../../Util/model_parser ../../../Microphysics/EOS ../../../Microphysics/EOS/gamma_law ../../../Microphysics/networks ../../../Microphysics/networks/general_null /home/alice/Documents/Microphysics/EOS /home/alice/Documents/Microphysics/networks /home/alice/Documents/amrex/Src/F_BaseLib /home/alice/Documents/amrex/Tools/C_scripts ./tmp_build_dir/o/3d.gnu.EXE

INCLUDES = $(addprefix -I, $(INCLUDE_FOLDERS))

KIND_MAP = kind_map
ARGUMENT_MAP = argument_map

LIBTOOL = ar src

COMPILE_FLAGS = -DNDEBUG -DBL_USE_OMP -DAMREX_GIT_VERSION=\"17.06-566-ge05af5f5b2a1-dirty\" -DBL_GCC_VERSION='7' -DBL_GCC_MAJOR_VERSION=7 -DBL_GCC_MINOR_VERSION=7 -DBL_SPACEDIM=3 -DAMREX_SPACEDIM=3 -DBL_FORT_USE_UNDERSCORE -DBL_Linux -DCRSEGRNDOMP -DSPONGE -DBL_USE_F_BASELIB

LINK_FLAGS = -lgfortran -lquadmath -L/usr/lib/gcc/x86_64-linux-gnu/7 -lstdc++

TARGETS = eos riemann_util probdata prob_params meth_params

#objForExecs += $(addprefix $(pwd), $(addprefix _, $(addsuffix .cpython-36m-x86_64-linux-gnu.so, $(TARGETS))))

$(addprefix $(pwd),libsrc.a): ${LIBSRC_OBJECTS}
	mkdir -p f90wrap
	${LIBTOOL} $@ $?

$(addprefix $(pwd),f90wrap_eos.f90): libsrc.a
	f90wrap -c -m eos ../../../Microphysics/EOS/*.F90 ../../../Microphysics/EOS/*.f90 ../../../Microphysics/EOS/gamma_law/gamma_law.F90 -v -P -k $(KIND_MAP)

$(addprefix $(pwd),f90wrap_riemann_util.f90): libsrc.a
	f90wrap -m riemann_util ../../../Source/hydro/riemann_util.f90 -v -k $(KIND_MAP)

$(addprefix $(pwd),f90wrap_probdata.f90): libsrc.a
	f90wrap -c -m probdata probdata.f90 -v -k $(KIND_MAP)

$(addprefix $(pwd),f90wrap_prob_params.f90): libsrc.a
	f90wrap -c -m prob_params ../../../Source/driver/prob_params.f90 -v -k $(KIND_MAP)

$(addprefix $(pwd),f90wrap_meth_params.f90): libsrc.a
	f90wrap -c -m meth_params ../../../Source/driver/meth_params.F90 -v -k $(KIND_MAP) --skip 'ca_finalize_meth_params' 'ca_set_castro_method_params'


# NOTE: the order of the compilation and linking stuff here is VERY IMPORTANT
$(addprefix $(pwd),_eos.cpython-36m-x86_64-linux-gnu.so): f90wrap_eos.f90
	-f2py-f90wrap --build-dir f90wrap -c -m _eos  f90wrap_eos*.f90 f90wrap_gamma_law.f90 --verbose $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)
	sed -i 's/\,&slen(f90wrap_[a-z_]\+)\,""//' f90wrap/src.linux-x86_64-3.6/_eosmodule.c
	f2py-f90wrap --build-dir f90wrap -c -m _eos  f90wrap_eos*.f90 f90wrap_gamma_law.f90 --verbose $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)

$(addprefix $(pwd),_riemann_util.cpython-36m-x86_64-linux-gnu.so): f90wrap_riemann_util.f90
	f2py-f90wrap --build-dir f90wrap -c -m _riemann_util $< --verbose  $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)

$(addprefix $(pwd),_probdata.cpython-36m-x86_64-linux-gnu.so): f90wrap_probdata.f90
	f2py-f90wrap --build-dir f90wrap -c -m _probdata $< --verbose $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)

$(addprefix $(pwd),_prob_params.cpython-36m-x86_64-linux-gnu.so): f90wrap_prob_params.f90
	f2py-f90wrap --build-dir f90wrap -c -m _prob_params $< --verbose $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)

$(addprefix $(pwd),_meth_params.cpython-36m-x86_64-linux-gnu.so): f90wrap_meth_params.f90
	-f2py-f90wrap --build-dir f90wrap -c -m _meth_params $< --verbose $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)
	sed -i 's/\,&slen(f90wrap_[a-z_]\+)\,""//' f90wrap/src.linux-x86_64-3.6/_meth_paramsmodule.c
	f2py-f90wrap --build-dir f90wrap -c -m _meth_params $< --verbose $(COMPILE_FLAGS) $(INCLUDES) -L. -lsrc $(LINK_FLAGS)

clean::
	-rm *.o *.so f90wrap* libsrc.a
	-rm -r eos
	-rm -r src.linux*
	-rm prob_params.py
	-rm probdata.py
	-rm riemann_util.py
	-rm actual_network.py
	-rm -r f90wrap
